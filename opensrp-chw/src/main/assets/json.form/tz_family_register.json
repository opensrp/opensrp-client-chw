{
  "validate_on_submit": true,
  "show_errors_on_submit": false,
  "count": "2",
  "encounter_type": "Family Registration",
  "entity_id": "",
  "relational_id": "",
  "metadata": {
    "start": {
      "openmrs_entity_parent": "",
      "openmrs_entity": "concept",
      "openmrs_data_type": "start",
      "openmrs_entity_id": "163137AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    },
    "end": {
      "openmrs_entity_parent": "",
      "openmrs_entity": "concept",
      "openmrs_data_type": "end",
      "openmrs_entity_id": "163138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    },
    "today": {
      "openmrs_entity_parent": "",
      "openmrs_entity": "encounter",
      "openmrs_entity_id": "encounter_date"
    },
    "deviceid": {
      "openmrs_entity_parent": "",
      "openmrs_entity": "concept",
      "openmrs_data_type": "deviceid",
      "openmrs_entity_id": "163149AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    },
    "subscriberid": {
      "openmrs_entity_parent": "",
      "openmrs_entity": "concept",
      "openmrs_data_type": "subscriberid",
      "openmrs_entity_id": "163150AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    },
    "simserial": {
      "openmrs_entity_parent": "",
      "openmrs_entity": "concept",
      "openmrs_data_type": "simserial",
      "openmrs_entity_id": "163151AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    },
    "phonenumber": {
      "openmrs_entity_parent": "",
      "openmrs_entity": "concept",
      "openmrs_data_type": "phonenumber",
      "openmrs_entity_id": "163152AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    },
    "encounter_location": "",
    "look_up": {
      "entity_id": "",
      "value": ""
    }
  },
  "step1": {
    "title": "Family details",
    "next": "step2",
    "fields": [
      {
        "key": "fam_name",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person",
        "openmrs_entity_id": "first_name",
        "type": "edit_text",
        "hint": "Family name",
        "edit_type": "name",
        "v_required": {
          "value": "true",
          "err": "Please enter the family name"
        },
        "v_regex": {
          "value": "[A-Za-z\\s\\.\\-]*",
          "err": "Please enter a valid name"
        }
      },
      {
        "key": "unique_id",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person_identifier",
        "openmrs_entity_id": "opensrp_id",
        "hidden": "true",
        "type": "barcode",
        "barcode_type": "qrcode",
        "hint": "ID",
        "scanButtonText": "Scan QR Code",
        "v_numeric": {
          "value": "true",
          "err": "Please enter a valid ID"
        }
      },
      {
        "key": "village_town",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person_address",
        "openmrs_entity_id": "cityVillage",
        "type": "edit_text",
        "hint": "Family Village",
        "v_required": {
          "value": "true",
          "err": "Please enter the village or town"
        }
      },
      {
        "key": "landmark",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person_address",
        "openmrs_entity_id": "landmark",
        "type": "edit_text",
        "hint": "Landmark/ Description of house location"
      },
      {
        "key": "gps",
        "openmrs_entity_parent": "",
        "openmrs_entity": "concept",
        "openmrs_entity_id": "163277AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_data_type": "text",
        "type": "gps"
      },
      {
        "key": "spacer",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "spacer",
        "spacer_height": "15dp"
      },
      {
        "key": "nearest_facility",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person_attribute",
        "openmrs_entity_id": "",
        "openmrs_data_type": "",
        "type": "spinner",
        "hint": "Nearest health facility",
        "values": [
          "Petty trade",
          "Agriculture, hunting and fishing",
          "Exploitation of mines and quarries",
          "Manufacturing industry",
          "Construction",
          "Electricity, gas and water",
          "Commercial, hotels and restaurants",
          "Transport, storage and communications",
          "Financial institutions",
          "Communication, social and personal services",
          "Other"
        ],
        "openmrs_choice_ids": {
          "Petty trade": "1539AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Agriculture, hunting and fishing": "165411AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Exploitation of mines and quarries": "165412AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Manufacturing industry": "165407AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Construction": "165408AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Electricity, gas and water": "165409AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Commercial, hotels and restaurants": "165410AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Transport, storage and communications": "165413AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Financial institutions": "165414AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Communication, social and personal services": "165415AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
          "Other" : "5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
        }
      }
    ]
  },
  "step2": {
    "title": "Family head",
    "fields": [
      {
        "key": "photo",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "choose_image",
        "uploadButtonText": "Take a picture of the person"
      },
      {
        "key": "unique_id",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person_identifier",
        "openmrs_entity_id": "opensrp_id",
        "type": "edit_text",
        "hint": "ID",
        "value": "0",
        "read_only" : "true",
        "v_numeric": {
          "value": "true",
          "err": "Please enter a valid ID"
        },
        "v_required": {
          "value": "true",
          "err": "Please enter the ID"
        }
      },
      {
        "key": "first_name",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person",
        "openmrs_entity_id": "first_name",
        "type": "edit_text",
        "hint": "First name",
        "edit_type": "name",
        "v_required": {
          "value": "true",
          "err": "Please enter the first name"
        },
        "v_regex": {
          "value": "[A-Za-z\\s\.\-]*",
          "err": "Please enter a valid name"
        }
      },
      {
        "key": "middle_name",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person",
        "openmrs_entity_id": "middle_name",
        "type": "edit_text",
        "hint": "Middle name",
        "edit_type": "name",
        "v_regex": {
          "value": "[A-Za-z\\s\.\-]*",
          "err": "Please enter a valid name"
        }
      },
      {
        "key": "surname",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "edit_text",
        "hint": "Surname",
        "edit_type": "name",
        "v_required": {
          "value": "true",
          "err": "Please enter the surname"
        },
        "v_regex": {
          "value": "[A-Za-z\\s\.\-]*",
          "err": "Please enter a valid name"
        },
        "relevance": {
          "rules-engine": {
            "ex-rules": {
              "rules-file": "tz_family_register_relevance.yml"
            }
          }
        }
      },
      {
        "key": "same_as_fam_name",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "check_box",
        "label": "",
        "options": [
          {
            "key": "same_as_fam_name",
            "text": "Surname same as family name",
            "text_size": "18px",
            "value": "false"
          }
        ]
      },
      {
        "key": "surname_calculation",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person",
        "openmrs_entity_id": "last_name",
        "type": "edit_text",
        "hidden": true,
        "hint": "Surname as Family name",
        "calculation": {
          "rules-engine": {
            "ex-rules": {
              "rules-file": "family-register-calculation.yml"
            }
          }
        }
      },
      {
        "key": "dob",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person",
        "openmrs_entity_id": "birthdate",
        "type": "date_picker",
        "hint": "Date of birth (DOB)",
        "expanded": false,
        "duration": {
          "label": "Age"
        },
        "min_date": "today-120y",
        "max_date": "today-5y",
        "v_required": {
          "value": "true",
          "err": "Please enter the date of birth"
        },
        "relevance": {
          "rules-engine": {
            "ex-rules": {
              "rules-file": "tz_family_register_relevance.yml"
            }
          }
        }
      },
      {
        "key": "dob_unknown",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person",
        "openmrs_entity_id": "birthdateApprox",
        "type": "check_box",
        "label": "",
        "options": [
          {
            "key": "dob_unknown",
            "text": "DOB unknown?",
            "text_size": "18px",
            "value": "false"
          }
        ]
      },
      {
        "key": "age",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person_attribute",
        "openmrs_entity_id": "age_entered",
        "type": "edit_text",
        "hint": "Age",
        "v_numeric": {
          "value": "true",
          "err": "Number must begin with 0 and must be a total of 10 digits in length"
        },
        "v_min": {
          "value": "5",
          "err": "Age must be equal or greater than 5"
        },
        "v_max": {
          "value": "120",
          "err": "Age must be equal or less than 120"
        },
        "relevance": {
          "rules-engine": {
            "ex-rules": {
              "rules-file": "tz_family_register_relevance.yml"
            }
          }
        },
        "v_required": {
          "value": true,
          "err": "Please enter the age"
        }
      },
      {
        "key": "id_avail",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "check_box",
        "label": "Do you have any of the following IDs?",
        "label_text_style": "normal",
        "text_color": "#C0C0C0",
        "exclusive": [
          "chk_none"
        ],
        "options": [
          {
            "key": "chk_national_id",
            "text": "National ID",
            "value": false,
            "openmrs_entity": "",
            "openmrs_entity_id": ""
          },
          {
            "key": "chk_voters_id",
            "text": "Voter's registration ID",
            "value": false,
            "openmrs_entity": "",
            "openmrs_entity_id": ""
          },
          {
            "key": "chk_drivers_license",
            "text": "Driver's license",
            "value": false,
            "openmrs_entity": "",
            "openmrs_entity_id": ""
          },
          {
            "key": "chk_passport",
            "text": "Passport",
            "value": false,
            "openmrs_entity": "",
            "openmrs_entity_id": ""
          },
          {
            "key": "chk_none",
            "text": "None",
            "value": false,
            "openmrs_entity": "",
            "openmrs_entity_id": ""
          }
        ],
        "v_required": {
          "value": true,
          "err": "Please specify any other symptoms or select none"
        }
      },
      {
        "key": "national_id",
        "openmrs_entity_parent": "",
        "openmrs_entity": "concept",
        "openmrs_entity_id": "national_id",
        "type": "edit_text",
        "hint": "National ID number",
        "edit_type": "name",
        "v_required": {
          "value": "true",
          "err": "Please enter National ID number"
        },
        "relevance": {
          "step2:id_avail": {
            "ex-checkbox": [
              {
                "or": [
                  "chk_national_id"
                ]
              }
            ]
          }
        }
      },
      {
        "key": "voter_id",
        "openmrs_entity_parent": "",
        "openmrs_entity": "concept",
        "openmrs_entity_id": "voter_id",
        "type": "edit_text",
        "hint": "Voter's registration number",
        "edit_type": "name",
        "v_required": {
          "value": "true",
          "err": "Please enter Voter's registration number"
        },
        "relevance": {
          "step2:id_avail": {
            "ex-checkbox": [
              {
                "or": [
                  "chk_voters_id"
                ]
              }
            ]
          }
        }
      },
      {
        "key": "driver_license",
        "openmrs_entity_parent": "",
        "openmrs_entity": "concept",
        "openmrs_entity_id": "driver_license",
        "type": "edit_text",
        "hint": "Driver's license number",
        "edit_type": "name",
        "v_required": {
          "value": "true",
          "err": "Please enter driver's license number"
        },
        "relevance": {
          "step2:id_avail": {
            "ex-checkbox": [
              {
                "or": [
                  "chk_drivers_license"
                ]
              }
            ]
          }
        }
      },
      {
        "key": "passport",
        "openmrs_entity_parent": "",
        "openmrs_entity": "concept",
        "openmrs_entity_id": "passport",
        "type": "edit_text",
        "hint": "Passport number",
        "edit_type": "name",
        "v_required": {
          "value": "true",
          "err": "Please enter passport number"
        },
        "relevance": {
          "step2:id_avail": {
            "ex-checkbox": [
              {
                "or": [
                  "chk_passport"
                ]
              }
            ]
          }
        }
      },
      {
        "key": "insurance_provider",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "spinner",
        "hint": "Health insurance provider",
        "values": [
          "Community Health Fund (CHF)",
          "iCHF",
          "National Social Security Fund - Social Health Insurance Benefit (SHIB)",
          "Tiba Kwa Kadi (TIKA)",
          "AAR Healthcare",
          "Strategies Insurance",
          "Milvik Tanzania  Ltd (BIMA Mkononi)",
          "Britam Insurance Tanzania",
          "Jubilee Insurance",
          "Resolutions Insurance",
          "Reliance Insurance",
          "Other",
          "None"
        ],
        "v_required": {
          "value": "true",
          "err": "Please enter the insurance provider"
        }
      },
      {
        "key": "insurance_provider_other",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "edit_text",
        "hint": "Other health insurance provider",
        "v_required": {
          "value": "true",
          "err": "Please specify the insurance provider"
        }
      },
      {
        "key": "insurance_provider_number",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "edit_text",
        "hint": "Health insurance provider number",
        "v_required": {
          "value": "true",
          "err": "Please add the health insurance provider iD Number"
        }
      },
      {
        "key": "sex",
        "openmrs_entity_parent": "",
        "openmrs_entity": "person",
        "openmrs_entity_id": "gender",
        "type": "spinner",
        "hint": "Sex",
        "values": [
          "Male",
          "Female"
        ],
        "v_required": {
          "value": "true",
          "err": "Please enter the sex"
        }
      },
      {
        "key": "wra",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "hidden",
        "values": ""
      },
      {
        "key": "mra",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "hidden",
        "values": ""
      },
      {
        "key": "preg_1yr",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "spinner",
        "hint": "Has the woman delivered in the last 1 year?",
        "values": [
          "Yes",
          "No"
        ],
        "relevance": {
          "rules-engine": {
            "ex-rules": {
              "rules-file": "tz_family_register_relevance.yml"
            }
          }
        }
      },
      {
        "key": "disabilities",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "spinner",
        "hint": "Physical disabilities",
        "values": [
          "Yes",
          "No"
        ],
        "v_required": {
          "value": "true",
          "err": "Please select one"
        }
      },
      {
        "key": "type_of_disability",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "edit_text",
        "hint": "Type of disability",
        "v_required": {
          "value": "true",
          "err": "Please enter type of disability"
        },
        "relevance": {
          "rules-engine": {
            "ex-rules": {
              "rules-file": "tz_family_register_relevance.yml"
            }
          }
        }
      },
      {
        "key": "phone_number",
        "openmrs_entity_parent": "",
        "openmrs_entity": "concept",
        "openmrs_entity_id": "159635AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "type": "edit_text",
        "hint": "Phone number",
        "v_numeric": {
          "value": "true",
          "err": "Number must be a total of 10 digits in length"
        },
        "v_regex": {
          "value": "(0[0-9]{9})|\s*",
          "err": "Number must be 10 digits and must start with 0."
        },
        "v_required": {
          "value": false,
          "err": "Please specify the phone number"
        }
      },
      {
        "key": "other_phone_number",
        "openmrs_entity_parent": "159635AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "openmrs_entity": "concept",
        "openmrs_entity_id": "5622AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",
        "type": "edit_text",
        "hint": "Other phone number",
        "v_numeric": {
          "value": "true",
          "err": "Number must be a total of 10 digits in length"
        },
        "v_regex": {
          "value": "(0[0-9]{9})|\s*",
          "err": "Number must be 10 digits and must start with 0."
        }
      },
      {
        "key": "service_provider",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "openmrs_data_type": "select one",
        "type": "spinner",
        "hint": "Occupation of the family member",
        "values": [
          "Community Health Worker (CHW)",
          "Community Based Distributor",
          "Community IMCI",
          "Home Based Care (HBC)",
          "Community HMIS (cHMIS)",
          "Traditional Birth Attendant",
          "Traditional Healer",
          "Teacher",
          "Farmer",
          "Civil Servant",
          "Nurse",
          "Other",
          "None"
        ],
        "v_required": {
          "value": "true",
          "err": "Please select one"
        }
      },
      {
        "key": "leader",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "openmrs_data_type": "Any leadership role in the community?",
        "type": "spinner",
        "hint": "Any leadership role in the community?",
        "values": [
          "Religious leader",
          "Political leader",
          "Influential leader",
          "Traditional leader",
          "Other",
          "None"
        ],
        "v_required": {
          "value": "true",
          "err": "Please select one"
        }
      },
      {
        "key": "leader_other",
        "openmrs_entity_parent": "",
        "openmrs_entity": "",
        "openmrs_entity_id": "",
        "type": "edit_text",
        "hint": "Mention other role in the community",
        "edit_type": "name",
        "v_required": {
          "value": "true",
          "err": "Please specify role"
        },
        "relevance": {
          "rules-engine": {
            "ex-rules": {
              "rules-file": "tz_family_register_relevance.yml"
            }
          }
        }
      }
    ]
  }
}